let chatHistory = ""; // yahan store hoga saara conversation

async function sendMessage() {
  const input = document.getElementById("userInput");
  const messages = document.getElementById("messages");
  const question = input.value.trim();
  if (!question) return;

  messages.innerHTML += `<div class="message user">You: ${question}</div>`;
  input.value = "";

  // Add current question to chat history
  chatHistory += `You: ${question}\n`;

  // Call API with full conversation
  const response = await fetch(`https://zorvaxo.vercel.app/api/main/ai-chatgpt?text=${encodeURIComponent(chatHistory)}&key=ZORVAXOxAI`);
  const data = await response.json();

  // Show bot's reply
  messages.innerHTML += `<div class="message bot">Bot: ${data.answer}</div>`;
  messages.scrollTop = messages.scrollHeight;

  // Add bot reply to history
  chatHistory += `Bot: ${data.answer}\n`;
}